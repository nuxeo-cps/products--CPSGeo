<metal:block define-macro="map_selector"
	     tal:define="global current_map_id here/map_id|nothing;
			 current_map_context python:current_map_id and here.portal_maps.mapContextFor(current_map_id) or {}">
<div style="padding:10px">
  <span i18n:translate="label_cpsgeo_select_base_map">
    Select base map
  </span>
  <form id="map_selector">
    <select name=map onChange="switch_map()">
      <option value=""
	      i18n:translate="label_cpsgeo_choose_map">
	--- Choose Map ---
      </option>
      <div tal:repeat="map here/portal_maps/mapContexts">
	<tal:block condition="python:map['path'] == current_map_context.get('path')">
	  <option tal:attributes="value map/path" selected="1"
		  tal:content="map/title">title
	  </option>
	</tal:block>
	<tal:block condition="python:map['path'] != current_map_context.get('path')">
	  <option tal:attributes="value map/path"
		  tal:content="map/title">title
	  </option>
	</tal:block>
      </div>
    </select>
  </form>
</div>
</metal:block>
